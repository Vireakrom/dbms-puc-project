{% extends "student/student_base.html" %}

{% block title %}My Reports{% endblock %}

{% block content %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    background: #f4f6fb;
}

/* ===========================
   PAGE HEADER
=========================== */
.page-header {
    margin-bottom: 30px;
}

.page-header h1 {
    font-size: 32px;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 8px;
}

.page-header p {
    color: #7f8c8d;
    font-size: 16px;
}

/* ===========================
   SUMMARY CARDS
=========================== */
.summary-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.summary-card {
    background: white;
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
    text-align: center;
    transition: 0.3s;
}

.summary-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
}

.summary-card i {
    font-size: 40px;
    margin-bottom: 15px;
}

.summary-card.blue i {
    color: #3b82f6;
}

.summary-card.green i {
    color: #10b981;
}

.summary-card.yellow i {
    color: #f59e0b;
}

.summary-card.purple i {
    color: #8b5cf6;
}

.summary-card h3 {
    font-size: 32px;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 5px;
}

.summary-card p {
    color: #7f8c8d;
    font-size: 14px;
    margin: 0;
}

/* ===========================
   PERFORMANCE CHART
=========================== */
.chart-container {
    background: white;
    padding: 30px;
    border-radius: 18px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    margin-bottom: 30px;
}

.chart-container h2 {
    font-size: 22px;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 25px;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* ===========================
   GRADES TABLE
=========================== */
.grades-section {
    background: white;
    padding: 30px;
    border-radius: 18px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.grades-section h2 {
    font-size: 22px;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.grades-table {
    width: 100%;
    border-collapse: collapse;
}

.grades-table thead {
    background: #f8f9fa;
}

.grades-table th {
    padding: 15px;
    text-align: left;
    font-weight: 700;
    color: #2c3e50;
    border-bottom: 2px solid #e5e7eb;
}

.grades-table td {
    padding: 15px;
    border-bottom: 1px solid #e5e7eb;
    color: #555;
}

.grades-table tr:hover {
    background: #f9fafb;
}

.grade-badge {
    display: inline-block;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
}

.grade-excellent {
    background: #d1fae5;
    color: #065f46;
}

.grade-good {
    background: #dbeafe;
    color: #1e40af;
}

.grade-average {
    background: #fef3c7;
    color: #92400e;
}

.grade-poor {
    background: #fee2e2;
    color: #991b1b;
}

.status-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 11px;
    font-weight: 600;
}

.status-completed {
    background: #d1f2eb;
    color: #27ae60;
}

.status-pending {
    background: #fff3cd;
    color: #f39c12;
}

/* ===========================
   EMPTY STATE
=========================== */
.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #7f8c8d;
}

.empty-state i {
    font-size: 80px;
    color: #d1d5db;
    margin-bottom: 20px;
}

.empty-state h3 {
    font-size: 24px;
    color: #2c3e50;
    margin-bottom: 10px;
}

.empty-state p {
    font-size: 16px;
}
</style>

<div class="page-header">
    <h1><i class="bi bi-file-earmark-bar-graph"></i> My Academic Reports</h1>
    <p>Track your quiz performance and grades across all subjects</p>
</div>

<!-- Summary Cards -->
<div class="summary-cards">
    <div class="summary-card blue">
        <i class="bi bi-clipboard-check"></i>
        <h3>12</h3>
        <p>Quizzes Completed</p>
    </div>
    <div class="summary-card green">
        <i class="bi bi-graph-up-arrow"></i>
        <h3>85.5%</h3>
        <p>Average Score</p>
    </div>
    <div class="summary-card yellow">
        <i class="bi bi-hourglass-split"></i>
        <h3>3</h3>
        <p>Pending Quizzes</p>
    </div>
    <div class="summary-card purple">
        <i class="bi bi-trophy"></i>
        <h3>8</h3>
        <p>Top Scores</p>
    </div>
</div>

<!-- Performance Chart -->
<div class="chart-container">
    <h2><i class="bi bi-bar-chart-line"></i> Performance Trend</h2>
    <canvas id="performanceChart" style="max-height: 300px;"></canvas>
</div>

<!-- Grades Table -->
<div class="grades-section">
    <h2><i class="bi bi-table"></i> Quiz Results</h2>

    <table class="grades-table">
        <thead>
            <tr>
                <th>Quiz Title</th>
                <th>Subject</th>
                <th>Date</th>
                <th>Score</th>
                <th>Grade</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <!-- Sample Data - Replace with dynamic data from backend -->
            <tr>
                <td>Midterm Exam</td>
                <td>Mathematics</td>
                <td>Nov 28, 2025</td>
                <td>92/100</td>
                <td><span class="grade-badge grade-excellent">A</span></td>
                <td><span class="status-badge status-completed">Completed</span></td>
            </tr>
            <tr>
                <td>Chapter 5 Quiz</td>
                <td>Physics</td>
                <td>Nov 25, 2025</td>
                <td>78/100</td>
                <td><span class="grade-badge grade-good">B</span></td>
                <td><span class="status-badge status-completed">Completed</span></td>
            </tr>
            <tr>
                <td>Grammar Test</td>
                <td>English</td>
                <td>Nov 22, 2025</td>
                <td>88/100</td>
                <td><span class="grade-badge grade-excellent">A-</span></td>
                <td><span class="status-badge status-completed">Completed</span></td>
            </tr>
            <tr>
                <td>History Quiz</td>
                <td>History</td>
                <td>Nov 20, 2025</td>
                <td>65/100</td>
                <td><span class="grade-badge grade-average">C</span></td>
                <td><span class="status-badge status-completed">Completed</span></td>
            </tr>
            <tr>
                <td>Final Project</td>
                <td>Computer Science</td>
                <td>Dec 5, 2025</td>
                <td>-</td>
                <td><span class="grade-badge grade-poor">-</span></td>
                <td><span class="status-badge status-pending">Pending</span></td>
            </tr>
        </tbody>
    </table>

    <!-- Uncomment if no data available -->
    <!-- <div class="empty-state">
        <i class="bi bi-inbox"></i>
        <h3>No Reports Available</h3>
        <p>You haven't completed any quizzes yet. Start taking quizzes to see your reports here.</p>
    </div> -->
</div>

<script>
// Performance Chart
const ctx = document.getElementById('performanceChart').getContext('2d');
const performanceChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
        datasets: [{
            label: 'Average Score (%)',
            data: [75, 78, 82, 85, 88, 90],
            borderColor: '#3b82f6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            borderWidth: 3,
            tension: 0.4,
            fill: true,
            pointRadius: 5,
            pointHoverRadius: 7,
            pointBackgroundColor: '#3b82f6',
            pointBorderColor: '#fff',
            pointBorderWidth: 2
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: true,
        plugins: {
            legend: {
                display: true,
                position: 'top',
            },
            tooltip: {
                enabled: true,
                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                padding: 12,
                titleFont: {
                    size: 14,
                    weight: 'bold'
                },
                bodyFont: {
                    size: 13
                }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                max: 100,
                ticks: {
                    callback: function(value) {
                        return value + '%';
                    }
                }
            }
        }
    }
});
</script>

{% endblock %}

